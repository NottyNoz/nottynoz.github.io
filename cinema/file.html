<html>
<link href="https://vjs.zencdn.net/8.23.4/video-js.min.css" rel="stylesheet">
<script src="https://vjs.zencdn.net/8.23.4/video.min.js"></script>
<body style="margin:0px;background-color:black;overflow:hidden;">
	<video id="vjsplayer" style="width:100%;height:100%;" class="video-js vjs-default-skin vjs-big-play-centered" autoplay preload="auto" data-setup='{"techorder" : ["html5"], "errorDisplay": false}'></video>
</body>
<script>
	const urlParams = new URLSearchParams(window.location.search);
	var id = urlParams.get("v");

    var player = videojs("vjsplayer");
	var player_ready = false;
	var volume = parseFloat(urlParams.get("vol"));
	var seek = parseFloat(urlParams.get("seek"));
    
	function think(){
        seek += .1;
		if (player_ready){
			document.title = "Loaded";
			if (player.duration() > 0){
				if (Math.abs(player.currentTime() - seek) > 2){
                    player.currentTime(seek);
				}
			}
		}
	}
	setInterval(think, 100);
    
    window.onkeydown = function(e){
        var code = e.keyCode ? e.keyCode : e.which;
        
    	if (code >= 240 && code <= 340){ // 0xF0
    		volume = code - 240;
			player.volume(volume/100);
    	}
    };
    
    window.onwheel = function(e){
    	seek = Math.round(e.wheelDelta * .6)/100; // weird error of 166.66%
        player.currentTime(seek);
    };
    
    if (id.indexOf(".m3u8") != -1) player.src({type: "application/x-mpegURL", src: id});
	else player.src({type: "video/mp4", src: id});
	player.play();
	player.volume(volume/100);
	player.currentTime(seek);
	player_ready = true;
</script>
</html>