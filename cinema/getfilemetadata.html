<html>
<link href="https://vjs.zencdn.net/8.23.4/video-js.min.css" rel="stylesheet">
<script src="https://vjs.zencdn.net/8.23.4/video.min.js"></script>
<video id="vjsplayer" class="video-js vjs-default-skin vjs-big-play-centered" autoplay preload="auto" data-setup='{"techorder" : ["html5"], "errorDisplay": false}'></video>
<script>
	const urlParams = new URLSearchParams(window.location.search);
	var id = urlParams.get("v");

	var player = videojs("vjsplayer");
	
	var json = new Object();
	function think(){
		if (player.error()) document.title = "failure";
		if (player.readyState() >= 2){
			json.duration = player.duration();
			document.title = JSON.stringify(json);
		}
	}
	setInterval(think, 100);
	
	if (id.indexOf(".m3u8") != -1) player.src({type: "application/x-mpegURL", src: id});
	else player.src({type: "video/mp4", src: id});
	player.play();
	player.volume(0);
</script>
</html>